<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Register · Future Assets</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #005ce6;
      --danger: #e74c3c;
      --bg: #f5f7fa;
      --radius: 8px;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      --font: "Segoe UI", Roboto, Arial, "PingFang SC", sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    /* 自定义样式 */
    .hero-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .glass-effect {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .floating-animation {
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    /* 注册表单样式 */
    .register-form {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 25px 45px rgba(0, 0, 0, 0.1);
    }

    .input-group {
      position: relative;
    }

    .input-group input {
      transition: all 0.3s ease;
    }

    .input-group input:focus {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: all 0.3s ease;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
    }
  </style>
</head>

<body class="hero-bg min-h-screen">
  <!-- 顶部导航栏 -->
  <header class="bg-white/10 backdrop-blur-md border-b border-white/20 h-16 px-6 flex justify-between items-center sticky top-0 z-50">
    <a href="index.html" class="flex items-center space-x-4 group cursor-pointer select-none">
      <svg class="w-9 h-9 text-white group-hover:text-blue-200 transition" fill="none" stroke="currentColor"
        stroke-width="2" viewBox="0 0 32 32">
        <circle cx="16" cy="16" r="13" stroke="currentColor" stroke-width="2" fill="rgba(255,255,255,0.1)" />
        <path d="M12 8l8 8-8 8" stroke="currentColor" stroke-width="2" fill="none" />
        <circle cx="16" cy="16" r="3" fill="currentColor" />
      </svg>
      <span class="text-2xl font-extrabold text-white group-hover:text-blue-200 tracking-wide transition leading-none"
        style="letter-spacing: 1px;">Future Assets</span>
    </a>
  </header>

  <!-- 主要内容区域 -->
  <div class="flex items-center justify-center min-h-screen p-6">
    <div class="w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">

      <!-- 左侧：品牌介绍 -->
      <div class="text-white space-y-8">
        <div class="floating-animation">
          <h1 class="text-5xl lg:text-6xl font-bold mb-6 leading-tight">
            Join
            <span class="bg-gradient-to-r from-blue-200 to-purple-200 bg-clip-text text-transparent">
              Future Assets
            </span>
          </h1>
          <p class="text-xl lg:text-2xl text-blue-100 mb-8 leading-relaxed">
            Start your journey to smarter investment management today
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="glass-effect rounded-xl p-6">
            <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mb-4">
              <i class="fas fa-rocket text-white text-xl"></i>
            </div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Quick Setup</h3>
            <p class="text-gray-600 text-sm">Get started in minutes with our streamlined onboarding process</p>
          </div>

          <div class="glass-effect rounded-xl p-6">
            <div class="w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center mb-4">
              <i class="fas fa-users text-white text-xl"></i>
            </div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Expert Support</h3>
            <p class="text-gray-600 text-sm">24/7 customer support to help you succeed</p>
          </div>
        </div>
      </div>

      <!-- 右侧：注册表单 -->
      <div class="w-full max-w-md mx-auto">
        <div class="register-form rounded-2xl p-8 shadow-2xl">
          <div class="text-center mb-8">
            <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
              <i class="fas fa-user-plus text-white text-2xl"></i>
            </div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">Create Account</h2>
            <p class="text-gray-600">Join thousands of smart investors</p>
          </div>

          <div id="errorMessage" class="mb-4 text-red-500 text-sm text-center"></div>

          <form id="registerForm" class="space-y-6">
            <div class="input-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
              <input type="text" id="regAccount"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                placeholder="Choose a username" required />
            </div>

            <div class="input-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
              <input type="password" id="regPassword"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                placeholder="At least 8 characters" minlength="8" required />
            </div>

            <div class="input-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">Confirm Password</label>
              <input type="password" id="confirmPassword"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                placeholder="Re-enter your password" required />
            </div>

            <div class="flex items-center">
              <input type="checkbox" id="agreeTerms" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" required />
              <label for="agreeTerms" class="ml-2 text-sm text-gray-600">
                I agree to the <a href="#" class="text-blue-600 hover:text-blue-500">Terms of Service</a> and
                <a href="#" class="text-blue-600 hover:text-blue-500">Privacy Policy</a>
              </label>
            </div>

            <button type="submit"
              class="btn-primary w-full py-3 px-4 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-300">
              Create Account
            </button>
          </form>

          <div class="mt-8 text-center">
            <p class="text-gray-600">
              Already have an account?
              <a href="log_in.html" class="text-blue-600 hover:text-blue-500 font-semibold">Sign in</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById('registerForm');
    const errorMessage = document.getElementById('errorMessage');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      errorMessage.textContent = ''; // Clear previous error

      const account = document.getElementById('regAccount').value.trim();
      const password = document.getElementById('regPassword').value;
      const confirm = document.getElementById('confirmPassword').value;

      // --- Frontend validation ---
      if (account.length < 3) {
        errorMessage.textContent = 'Username must be at least 3 characters';
        return;
      }
      if (password.length < 8) {
        errorMessage.textContent = 'Password must be at least 8 characters';
        return;
      }
      if (password !== confirm) {
        errorMessage.textContent = 'Passwords do not match';
        return;
      }

      // Send registration request (no avatar)
      try {
        const registerRes = await fetch('http://localhost:3000/api/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ account, password })
        });
        const registerData = await registerRes.json();

        if (registerRes.ok) {
          // 显示成功消息
          errorMessage.innerHTML = '<span class="text-green-600"><i class="fas fa-check-circle mr-2"></i>Registration successful! Redirecting to login page...</span>';

          // 重定向到登录页面
          setTimeout(() => {
            window.location.href = 'log_in.html';
          }, 2000);
        } else {
          // Show error from backend
          errorMessage.innerHTML = `<i class="fas fa-exclamation-circle mr-2"></i>${registerData.message}`;
        }
      } catch (error) {
        errorMessage.innerHTML = `<i class="fas fa-exclamation-triangle mr-2"></i>Request failed, please check your network connection.`;
      }
    });

    // 实时密码强度检查
    document.getElementById('regPassword').addEventListener('input', function(e) {
      const password = e.target.value;
      const strengthIndicator = document.getElementById('passwordStrength');

      if (!strengthIndicator) {
        const indicator = document.createElement('div');
        indicator.id = 'passwordStrength';
        indicator.className = 'mt-2 text-xs';
        e.target.parentNode.appendChild(indicator);
      }

      let strength = 0;
      let message = '';
      let color = '';

      if (password.length >= 8) strength++;
      if (/[A-Z]/.test(password)) strength++;
      if (/[a-z]/.test(password)) strength++;
      if (/[0-9]/.test(password)) strength++;
      if (/[^A-Za-z0-9]/.test(password)) strength++;

      switch (strength) {
        case 0:
        case 1:
          message = 'Weak password';
          color = 'text-red-500';
          break;
        case 2:
        case 3:
          message = 'Medium password';
          color = 'text-yellow-500';
          break;
        case 4:
        case 5:
          message = 'Strong password';
          color = 'text-green-500';
          break;
      }

      document.getElementById('passwordStrength').innerHTML = `<i class="fas fa-shield-alt mr-1"></i>${message}`;
      document.getElementById('passwordStrength').className = `mt-2 text-xs ${color}`;
    });

    // 确认密码匹配检查
    document.getElementById('confirmPassword').addEventListener('input', function(e) {
      const password = document.getElementById('regPassword').value;
      const confirmPassword = e.target.value;
      const matchIndicator = document.getElementById('passwordMatch');

      if (!matchIndicator) {
        const indicator = document.createElement('div');
        indicator.id = 'passwordMatch';
        indicator.className = 'mt-2 text-xs';
        e.target.parentNode.appendChild(indicator);
      }

      if (confirmPassword === '') {
        document.getElementById('passwordMatch').innerHTML = '';
        return;
      }

      if (password === confirmPassword) {
        document.getElementById('passwordMatch').innerHTML = '<i class="fas fa-check mr-1"></i>Passwords match';
        document.getElementById('passwordMatch').className = 'mt-2 text-xs text-green-500';
      } else {
        document.getElementById('passwordMatch').innerHTML = '<i class="fas fa-times mr-1"></i>Passwords do not match';
        document.getElementById('passwordMatch').className = 'mt-2 text-xs text-red-500';
      }
    });
  </script>
</body>
</html>